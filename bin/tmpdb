#!/usr/bin/perl

use strict;
use warnings;

use FindBin;
use lib "$FindBin::Bin/../lib";

use DBIx::TmpDB qw/tmpdb_backends tmpdb_new/;

my $backend = shift;

if ($backend eq '--list') {
	print join("\n", tmpdb_backends), "\n";
	exit 0;
}

die "No backend specified\n" unless $backend;

print "Creating temporary $backend server...\n";

my $db = tmpdb_new($backend) or die "Can't create $backend server\n";

my @prog = $db->client_program;

if (@prog) { system @prog; }
else { print "The $backend backend provides no client program\n"; }

print "Removing temporary $backend server...\n";
